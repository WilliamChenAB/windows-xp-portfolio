<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Windows XP Personal Portfolio</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="desktop-icons">
        <div class="desktop-icon" id="about-me">
            <img src="images/messenger.png" alt="About Me" />
            <span>About Me</span>
        </div>
        <div class="desktop-icon" id="projects">
            <img src="images/folder.png" alt="Projects" />
            <span>Projects</span>
        </div>
        <div class="desktop-icon" id="resume">
            <img src="images/file.png" alt="Resume" />
            <span>Resume</span>
        </div>
        <div class="desktop-icon" id="contact">
            <img src="images/mail.png" alt="Contact" />
            <span>Contact</span>
        </div>
    </div>

    <div class="taskbar">
        <div class="taskbar-left">
            <button id="start-button" onclick="toggleStartMenu()">
                <img src="images/windows-xp-logo.png" alt="XP Logo" />
                <em>start</em>
            </button>
        </div>
        <div class="taskbar-right">
            <img id="soundIcon" src="images/unmuted.png" alt="Sound Icon" />
            <div id="clock">12:00 PM</div>
        </div>
    </div>

    <div id="startMenu">
        <div id="start-header">
            <img src="images/headshot.png" alt="User Picture" />
            <span>William Lee Chen</span>
        </div>

        <div id="start-body">
            <div id="start-left">
                <!-- Left-side menu items -->
                <div>ğŸ“ Projects</div>
                <div>ğŸ“„ Resume</div>
                <div>ğŸ“¬ Contact</div>
            </div>
            <div id="start-right">
                <!-- Right-side frequently used / pinned apps -->
                <div>ğŸ–¥ï¸ My Computer</div>
                <div>ğŸ–¼ï¸ Pictures</div>
                <div>ğŸµ Music</div>
                <div id="help-button">â“ Help</div>
            </div>
        </div>

        <div id="start-footer">
            <div>ğŸ”’ Log Off</div>
            <div>â» Shut Down</div>
        </div>
    </div>

    <div class="popup" id="help-popup">
        <div id="help-popup-content">
            <div id="help-popup-header">
                <span>Help</span>
                <button class="close-button" data-target="help-popup">X</button>
            </div>
            <div id="help-popup-body">
                <p>Welcome to my Windows XPâ€“style personal portfolio! You can explore projects, view my resume, or
                    contact me using the desktop icons or Start menu.</p>
            </div>
            <div class="resize-handle"></div>
        </div>
    </div>

    <div class="popup" id="resume-popup">
        <div id="resume-popup-content">
            <div id="resume-popup-header">
                <span>Resume</span>
                <button class="close-button" data-target="resume-popup">X</button>
            </div>
            <div id="resume-popup-body">
                <iframe src="documents/resume.pdf" id="resume-pdf" frameborder="0"></iframe>
            </div>
            <div class="resize-handle"></div>
        </div>
    </div>

    <script>
        function toggleStartMenu() {
            const menu = document.getElementById('startMenu');
            menu.classList.toggle('active');
        }

        let isMuted = false;

        const soundIcon = document.getElementById("soundIcon");

        soundIcon.addEventListener("click", () => {
            isMuted = !isMuted;
            soundIcon.src = isMuted ? "images/muted.png" : "images/unmuted.png";

            const mediaElements = document.querySelectorAll("audio, video");
            mediaElements.forEach(el => {
                el.muted = isMuted;
            });
        });

        function updateClock() {
            const clock = document.getElementById("clock");
            const now = new Date();

            let hours = now.getHours();
            const minutes = now.getMinutes();
            const ampm = hours >= 12 ? "PM" : "AM";

            hours = hours % 12;
            hours = hours ? hours : 12;

            const paddedMinutes = minutes < 10 ? "0" + minutes : minutes;

            clock.textContent = `${hours}:${paddedMinutes} ${ampm}`;
        }

        updateClock();
        setInterval(updateClock, 1000);

        const helpPopup = document.getElementById("help-popup");

        document.querySelectorAll(".close-button").forEach(button => {
            button.addEventListener("click", () => {
                const targetId = button.getAttribute("data-target");
                document.getElementById(targetId).style.display = "none";
            });
        });

        window.addEventListener("DOMContentLoaded", () => {
            helpPopup.style.display = "flex";
        });

        document.getElementById("help-button").addEventListener("click", () => {
            helpPopup.style.display = "flex";
        });

        const header = document.getElementById("help-popup-header");

        let isDragging = false;
        let offsetX = 0;
        let offsetY = 0;

        header.addEventListener("mousedown", (e) => {
            isDragging = true;
            const rect = helpPopup.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;
            helpPopup.style.transition = "none";
        });

        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                helpPopup.style.left = `${e.clientX - offsetX}px`;
                helpPopup.style.top = `${e.clientY - offsetY}px`;
                helpPopup.style.transform = "none";
            }
        });

        document.addEventListener("mouseup", () => {
            isDragging = false;
        });

        const resizeHandle = helpPopup.querySelector(".resize-handle");
        const minWidth = 300;
        const minHeight = 200;

        let isResizing = false;
        let startX, startY, startWidth, startHeight;

        resizeHandle.addEventListener("mousedown", (e) => {
            e.preventDefault();
            isResizing = true;
            startX = e.clientX;
            startY = e.clientY;
            const rect = helpPopup.getBoundingClientRect();
            startWidth = rect.width;
            startHeight = rect.height;
            document.body.style.cursor = "se-resize";
        });

        document.addEventListener("mousemove", (e) => {
            if (isResizing) {
                const newWidth = Math.max(minWidth, startWidth + (e.clientX - startX));
                const newHeight = Math.max(minHeight, startHeight + (e.clientY - startY));
                helpPopup.style.width = newWidth + "px";
                helpPopup.style.height = newHeight + "px";
            }
        });

        document.addEventListener("mouseup", () => {
            if (isResizing) {
                isResizing = false;
                document.body.style.cursor = "";
            }
        });

        document.getElementById("resume").addEventListener("click", () => {
            document.getElementById("resume-popup").style.display = "flex";
        });

        const resumePopup = document.getElementById("resume-popup");
        const resumeHeader = document.getElementById("resume-popup-header");

        let isDraggingResume = false;
        let offsetXResume = 0;
        let offsetYResume = 0;

        resumeHeader.addEventListener("mousedown", (e) => {
            isDraggingResume = true;
            const rect = resumePopup.getBoundingClientRect();
            offsetXResume = e.clientX - rect.left;
            offsetYResume = e.clientY - rect.top;
            resumePopup.style.transition = "none";
        });

        document.addEventListener("mousemove", (e) => {
            if (isDraggingResume) {
                resumePopup.style.left = `${e.clientX - offsetXResume}px`;
                resumePopup.style.top = `${e.clientY - offsetYResume}px`;
                resumePopup.style.transform = "none";
            }
        });

        document.addEventListener("mouseup", () => {
            isDraggingResume = false;
        });
    </script>
</body>

</html>